================================================================================
                              MONETO - RÃ‰SUMÃ‰ DU PROJET
                      Application de Gestion FinanciÃ¨re Personnelle
================================================================================

ğŸ“‹ INFORMATIONS GÃ‰NÃ‰RALES
================================================================================
Nom du projet      : Moneto
Version            : 2.0.0
Type               : Progressive Web App (PWA) Next.js
Licence            : ISC
Description        : Application de gestion financiÃ¨re permettant de planifier
                     et visualiser son budget mensuel avec revenus fixes,
                     dÃ©penses fixes et allocation en enveloppes.
                     Support dark mode et fonctionnement offline.


ğŸ› ï¸ TECHNOLOGIES PRINCIPALES
================================================================================
Framework          : Next.js 15.5.4 (App Router)
BibliothÃ¨que UI    : React 19.1.1
Langage            : TypeScript 5.9.2
Styling            : Tailwind CSS 4.1.13 (avec dark mode)
Gestion d'Ã©tat     : Zustand 5.0.8
Stockage local     : localforage 1.10.0
Graphiques         : recharts 3.2.1, d3-sankey 0.12.3
Dates              : dayjs 1.11.18
PWA                : next-pwa 5.6.0


ğŸ“ STRUCTURE DU PROJET
================================================================================

RACINE/
â”‚
â”œâ”€â”€ app/                          # Pages Next.js (App Router)
â”‚   â”œâ”€â”€ globals.css              # Styles globaux + Tailwind + dark mode
â”‚   â”œâ”€â”€ layout.tsx               # Layout principal avec ThemeProvider et PWA meta
â”‚   â”œâ”€â”€ layout-with-nav.tsx      # Layout avec navigation sidebar
â”‚   â”œâ”€â”€ page.tsx                 # Page d'accueil avec notifications
â”‚   â”‚
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â””â”€â”€ page.tsx             # Dashboard - Liste plans + export/import JSON
â”‚   â”‚
â”‚   â”œâ”€â”€ onboarding/
â”‚   â”‚   â””â”€â”€ page.tsx             # Onboarding - Revenus/DÃ©penses avec validation
â”‚   â”‚
â”‚   â”œâ”€â”€ repartition/
â”‚   â”‚   â””â”€â”€ page.tsx             # RÃ©partition - Allocation avec sliders validÃ©s
â”‚   â”‚
â”‚   â””â”€â”€ visualisation/
â”‚       â””â”€â”€ page.tsx             # Visualisation - Sankey/Waterfall interactifs
â”‚
â”œâ”€â”€ components/                   # Composants React rÃ©utilisables
â”‚   â”œâ”€â”€ Navigation.tsx           # Sidebar avec ThemeToggle
â”‚   â”œâ”€â”€ ThemeProvider.tsx        # Context Provider pour le thÃ¨me
â”‚   â”œâ”€â”€ ThemeToggle.tsx          # Bouton switch Light/Dark/System
â”‚   â”‚
â”‚   â”œâ”€â”€ Graphiques
â”‚   â”œâ”€â”€ SankeyChart.tsx          # Diagramme Sankey avec tooltips
â”‚   â””â”€â”€ WaterfallChart.tsx       # Graphique cascade
â”‚   â”‚
â”‚   â”œâ”€â”€ Formulaires avec Validation
â”‚   â”œâ”€â”€ FixedItemInput.tsx       # Input ligne revenus/dÃ©penses validÃ©
â”‚   â”œâ”€â”€ IncomeExpenseForm.tsx    # Formulaire complet revenus/dÃ©penses
â”‚   â”œâ”€â”€ PercentageSlider.tsx     # Slider pourcentage validÃ©
â”‚   â”œâ”€â”€ EnvelopeAllocator.tsx    # Gestion enveloppes avec validation
â”‚   â””â”€â”€ BudgetValidation.tsx     # Composant validation visuelle
â”‚   â”‚
â”‚   â”œâ”€â”€ Messages et Erreurs
â”‚   â”œâ”€â”€ ValidationError.tsx      # Message erreur inline
â”‚   â”œâ”€â”€ ErrorMessage.tsx         # BanniÃ¨re erreur
â”‚   â”œâ”€â”€ SuccessMessage.tsx       # BanniÃ¨re succÃ¨s
â”‚   â””â”€â”€ NotificationBanner.tsx   # Notification contextuelles
â”‚
â”œâ”€â”€ lib/                          # Utilitaires et helpers
â”‚   â”œâ”€â”€ storage.ts               # Service localforage
â”‚   â”œâ”€â”€ financial.ts             # Formatage et calculs financiers
â”‚   â”œâ”€â”€ utils.ts                 # Utilitaires gÃ©nÃ©raux
â”‚   â”œâ”€â”€ monthly-plan.ts          # Calculs et validation plans
â”‚   â”œâ”€â”€ plan-calculator.ts       # Moteur de calcul principal
â”‚   â”œâ”€â”€ validation.ts            # Fonctions validation rÃ©utilisables
â”‚   â”œâ”€â”€ notifications.ts         # DÃ©tection alertes budget
â”‚   â””â”€â”€ export-import.ts         # Export/import JSON des plans
â”‚
â”œâ”€â”€ store/                        # Gestion d'Ã©tat Zustand
â”‚   â””â”€â”€ index.ts                 # Store avec persistance + thÃ¨me
â”‚
â”œâ”€â”€ public/                       # Assets statiques
â”‚   â”œâ”€â”€ manifest.json            # Manifest PWA
â”‚   â”œâ”€â”€ icons/                   # IcÃ´nes PWA (72-512px)
â”‚   â”‚   â””â”€â”€ README.md            # Instructions gÃ©nÃ©ration icÃ´nes
â”‚   â””â”€â”€ sw.js, workbox-*.js      # Service Worker (gÃ©nÃ©rÃ© au build)
â”‚
â”œâ”€â”€ Configuration
â”‚   â”œâ”€â”€ tailwind.config.ts       # Tailwind + darkMode: 'class'
â”‚   â”œâ”€â”€ postcss.config.mjs       # PostCSS
â”‚   â”œâ”€â”€ tsconfig.json            # TypeScript
â”‚   â”œâ”€â”€ next.config.ts           # Next.js + next-pwa
â”‚   â”œâ”€â”€ eslint.config.mjs        # ESLint
â”‚   â”œâ”€â”€ package.json             # DÃ©pendances + scripts
â”‚   â””â”€â”€ .gitignore               # Exclusion fichiers gÃ©nÃ©rÃ©s PWA
â”‚
â””â”€â”€ Documentation
    â”œâ”€â”€ README.md                # Documentation gÃ©nÃ©rale
    â”œâ”€â”€ STORE_GUIDE.md           # Guide complet du store Zustand
    â””â”€â”€ PROJET_RESUME.txt        # Ce fichier (documentation complÃ¨te)


ğŸ¯ FONCTIONNALITÃ‰S PRINCIPALES
================================================================================

1. DASHBOARD
   - Liste de tous les plans mensuels crÃ©Ã©s
   - CrÃ©ation d'un nouveau plan
   - Copie d'un plan existant (modal de sÃ©lection)
   - Actions : Modifier, Visualiser, Exporter, Supprimer
   - Export JSON par plan (moneto-plan-YYYY-MM.json)
   - Export global de tous les plans
   - Import JSON avec validation stricte
   - Affichage des rÃ©sumÃ©s financiers par plan
   - Support dark mode complet

2. ONBOARDING (Revenus et DÃ©penses fixes)
   - Formulaires avec validation en temps rÃ©el
   - Ajout/suppression de revenus fixes
   - Ajout/suppression de dÃ©penses fixes
   - Validation : noms non vides, montants positifs
   - Feedback visuel sur erreurs (ring rouge)
   - Messages d'erreur sous les champs
   - Calcul automatique du reste disponible
   - Validation avant passage Ã  la rÃ©partition
   - Composants rÃ©utilisables (IncomeExpenseForm)

3. RÃ‰PARTITION (Allocation en enveloppes)
   - Enveloppes par dÃ©faut (Ã‰pargne, Loisirs, Livret A, Crypto)
   - Ajout d'enveloppes personnalisÃ©es
   - Sliders et inputs synchronisÃ©s avec validation
   - Validation pourcentage 0-100%
   - Validation totale = 100% avec barre visuelle
   - Bouton "Ajuster Ã  100%" (normalisation automatique)
   - Calcul en temps rÃ©el des montants
   - Affichage erreurs si total â‰  100%
   - Couleurs personnalisÃ©es par enveloppe

4. VISUALISATION
   - SÃ©lecteur de mois
   - RÃ©sumÃ© financier complet
   - Graphique Waterfall interactif (cascade des flux)
   - Diagramme Sankey avec tooltips (visualisation des flux)
   - Structure 3 niveaux : Revenus â†’ DÃ©penses/Disponible â†’ Enveloppes
   - LÃ©gende avec code couleur
   - DÃ©tails des revenus, dÃ©penses et enveloppes
   - Validation du budget avec feedback visuel

5. NAVIGATION
   - Sidebar persistante avec liens
   - Indicateur de page active
   - ThemeToggle intÃ©grÃ© (Light/Dark/System)
   - Retour Ã  l'accueil
   - Support dark mode

6. PAGE D'ACCUEIL
   - SystÃ¨me de notifications intelligentes
   - Alertes contextuelles selon Ã©tat du budget
   - Boutons d'action pour corriger
   - PossibilitÃ© de dismiss les notifications
   - PrÃ©sentation des fonctionnalitÃ©s
   - CTA vers Dashboard


âœ… SYSTÃˆME DE VALIDATION DES ENTRÃ‰ES
================================================================================

FICHIERS CRÃ‰Ã‰S :
- lib/validation.ts              # Fonctions validation rÃ©utilisables
- components/ValidationError.tsx # Message erreur inline
- components/ErrorMessage.tsx    # BanniÃ¨re erreur complÃ¨te
- components/SuccessMessage.tsx  # BanniÃ¨re succÃ¨s

VALIDATIONS IMPLÃ‰MENTÃ‰ES :
âœ“ Noms non vides (1-50 caractÃ¨res)
âœ“ Montants positifs uniquement (0 Ã  999,999,999)
âœ“ Pourcentages valides (0-100%)
âœ“ Sanitization des chaÃ®nes (anti-XSS)
âœ“ Validation format mois (YYYY-MM)
âœ“ Validation somme pourcentages = 100%
âœ“ Validation email (si besoin futur)

COMPOSANTS AVEC VALIDATION :
- FixedItemInput.tsx
  â†’ Validation nom + montant
  â†’ Feedback visuel (ring rouge si erreur)
  â†’ Messages d'erreur sous les champs
  â†’ Montants nÃ©gatifs bloquÃ©s

- PercentageSlider.tsx
  â†’ Validation 0-100%
  â†’ Feedback visuel sur dÃ©passement
  â†’ Messages d'erreur contextuels

- EnvelopeAllocator.tsx
  â†’ Validation totale = 100%
  â†’ Barre de progression visuelle
  â†’ Code couleur (vert=OK, orange/rouge=erreur)
  â†’ Bouton auto-ajustement

FONCTIONS DISPONIBLES (lib/validation.ts) :
- validateName(name)              # VÃ©rifie nom non vide
- validateAmount(amount)          # VÃ©rifie montant positif
- validatePercentage(percentage)  # VÃ©rifie 0-100%
- validateMonth(month)            # VÃ©rifie format YYYY-MM
- validateEmail(email)            # VÃ©rifie format email
- validateTotalPercentage(array)  # VÃ©rifie somme = 100%
- validateNotEmpty(array)         # VÃ©rifie tableau non vide
- validateMultiple(validations)   # Combine plusieurs validations
- sanitizeString(input)           # Nettoie chaÃ®ne (anti-XSS)
- formatNumber(value)             # Formate nombre pour affichage


ğŸ¨ SYSTÃˆME DE THÃˆME DARK MODE
================================================================================

CONFIGURATION :
- Tailwind : darkMode: 'class'
- Variables CSS : --background, --foreground
- Transitions fluides : 0.3s ease
- Scrollbar personnalisÃ©e pour dark mode

FICHIERS CRÃ‰Ã‰S/MODIFIÃ‰S :
- tailwind.config.ts              # Activation dark mode
- app/globals.css                 # Variables CSS + scrollbar custom
- components/ThemeProvider.tsx    # Context Provider React
- components/ThemeToggle.tsx      # Bouton switch avec 3 modes
- store/index.ts                  # Ajout theme dans UserSettings

FONCTIONNALITÃ‰S :
âœ“ 3 modes disponibles : Light, Dark, System
  - Light : Fond blanc, textes sombres
  - Dark : Fond slate-900, textes clairs
  - System : Suit prÃ©fÃ©rences OS (prefers-color-scheme)

âœ“ ThemeProvider
  - DÃ©tecte prÃ©fÃ©rence systÃ¨me
  - Ã‰coute changements systÃ¨me en temps rÃ©el
  - Applique classe 'dark' sur <html>
  - GÃ¨re le state avec Zustand

âœ“ ThemeToggle
  - 3 Ã©tats rotatifs : System â†’ Light â†’ Dark â†’ System
  - IcÃ´nes adaptÃ©es : ğŸ–¥ï¸ System, â˜€ï¸ Light, ğŸŒ™ Dark
  - Label explicite du mode actif
  - IntÃ©grÃ© dans la navigation

âœ“ Persistance
  - Choix sauvegardÃ© dans Zustand
  - PersistÃ© dans IndexedDB via localforage
  - RestaurÃ© au chargement de l'app
  - Pas de flash de contenu (suppressHydrationWarning)

COMPOSANTS ADAPTÃ‰S POUR DARK MODE :
Tous les composants utilisent les classes Tailwind dark:
- Navigation â†’ dark:bg-slate-950
- Cartes â†’ dark:bg-slate-800
- Inputs â†’ dark:bg-slate-700
- Textes â†’ dark:text-slate-100/200/300
- Bordures â†’ dark:border-slate-600/700
- Messages â†’ dark:bg-{color}-900/20
- Boutons â†’ Hover states adaptÃ©s

COULEURS PRINCIPALES :
Light Mode :
- Background : #ffffff (blanc)
- Foreground : #1e293b (slate-800)
- Accents : emerald-600, blue-600, red-600

Dark Mode :
- Background : #0f172a (slate-950)
- Foreground : #f1f5f9 (slate-100)
- Accents : emerald-400, blue-400, red-400


ğŸ”” SYSTÃˆME DE NOTIFICATIONS IN-APP
================================================================================

FICHIERS CRÃ‰Ã‰S :
- lib/notifications.ts            # Logique dÃ©tection alertes
- components/NotificationBanner.tsx # Composant notification

TYPES DE NOTIFICATIONS :
1. âš ï¸ Warning : Aucun plan pour le mois en cours
   â†’ Action : "CrÃ©er un plan"

2. âŒ Error : Budget incomplet - Pas de revenus
   â†’ Action : "Ajouter des revenus"

3. âŒ Error : Budget incomplet - Pas de dÃ©penses
   â†’ Action : "Ajouter des dÃ©penses"

4. âŒ Error : Budget dÃ©sÃ©quilibrÃ© (dÃ©penses > revenus)
   â†’ Action : "Ajuster le budget"

5. âš ï¸ Warning : RÃ©partition manquante (pas d'enveloppes)
   â†’ Action : "RÃ©partir le budget"

6. âš ï¸ Warning : Pourcentages ne font pas 100%
   â†’ Action : "Ajuster les pourcentages"

7. âœ… Success : Budget complet et validÃ© !
   â†’ Action : "Voir la visualisation"

FONCTIONNALITÃ‰S :
âœ“ DÃ©tection automatique au chargement
âœ“ Affichage sur la page d'accueil
âœ“ Boutons d'action avec liens directs
âœ“ PossibilitÃ© de dismiss (fermer)
âœ“ Couleurs adaptÃ©es par type :
  - Error : rouge
  - Warning : orange
  - Success : vert
  - Info : bleu
âœ“ IcÃ´nes contextuelles par type
âœ“ Support dark mode complet
âœ“ Transition fluide

FONCTION PRINCIPALE (lib/notifications.ts) :
getCurrentMonthStatus(plans) :
  - DÃ©tecte le mois en cours (YYYY-MM)
  - Trouve le plan correspondant
  - Analyse l'Ã©tat du plan :
    * PrÃ©sence de revenus/dÃ©penses
    * Ã‰quilibre du budget
    * ComplÃ©tude des enveloppes
    * Validation des pourcentages
  - Retourne notifications[] Ã  afficher

getGeneralStats(plans) :
  - Statistiques globales sur tous les plans
  - Nombre de plans complets
  - Moyennes revenus/dÃ©penses/Ã©pargne


ğŸ“± PROGRESSIVE WEB APP (PWA)
================================================================================

CONFIGURATION COMPLÃˆTE :

1. MANIFEST.JSON (public/manifest.json)
   âœ“ Nom : "Moneto - Gestion FinanciÃ¨re"
   âœ“ Nom court : "Moneto"
   âœ“ Display : standalone (app native)
   âœ“ Background color : #ffffff
   âœ“ Theme color : #10b981 (emerald)
   âœ“ Orientation : portrait-primary
   âœ“ IcÃ´nes : 72, 96, 128, 144, 152, 192, 384, 512px
   âœ“ Shortcuts : Dashboard, Nouveau Plan
   âœ“ Categories : finance, productivity

2. SERVICE WORKER (next-pwa)
   Package : next-pwa ^5.6.0
   Configuration dans next.config.ts :

   StratÃ©gies de cache :
   - CacheFirst : Fonts, audio, video (durÃ©e longue)
   - StaleWhileRevalidate : Images, JS, CSS (24h)
   - NetworkFirst : Pages, donnÃ©es JSON (10s timeout)

   Caches configurÃ©s :
   - google-fonts-webfonts (1 an)
   - google-fonts-stylesheets (1 semaine)
   - static-font-assets (1 semaine)
   - static-image-assets (24h)
   - static-js-assets (24h)
   - static-style-assets (24h)
   - next-data (24h)
   - static-data-assets (24h)

   Comportement :
   - DÃ©sactivÃ© en dÃ©veloppement
   - Actif en production
   - GÃ©nÃ©ration automatique au build
   - Fichiers dans public/ (exclus de git)

3. META TAGS PWA (app/layout.tsx)
   âœ“ manifest : /manifest.json
   âœ“ apple-web-app-capable : true
   âœ“ apple-web-app-status-bar-style : default
   âœ“ apple-web-app-title : Moneto
   âœ“ theme-color : Adaptatif light/dark
   âœ“ viewport : OptimisÃ© mobile
   âœ“ icons : 192x192, 512x512

FONCTIONNEMENT OFFLINE :
âœ“ DonnÃ©es stockÃ©es dans IndexedDB (via localforage)
âœ“ Assets statiques en cache (service worker)
âœ“ Pages principales en cache
âœ“ Graphiques fonctionnent offline
âœ“ Ajout/modification de plans offline
âœ“ Synchronisation automatique quand online

INSTALLATION :
1. Build : npm run build
2. Start : npm start
3. Ouvrir navigateur (Chrome/Edge/Safari iOS 16.4+)
4. Cliquer icÃ´ne installation (barre adresse)
5. Suivre instructions navigateur
6. App ajoutÃ©e Ã  l'Ã©cran d'accueil

COMPATIBILITÃ‰ :
âœ“ Chrome/Edge : Installation desktop + mobile
âœ“ Firefox : Service Worker (pas installation)
âœ“ Safari iOS 16.4+ : Installation + Service Worker
âœ“ Samsung Internet : Installation + Service Worker

ICÃ”NES PWA :
Les icÃ´nes doivent Ãªtre crÃ©Ã©es manuellement dans public/icons/
Voir public/icons/README.md pour instructions
Tailles : 72, 96, 128, 144, 152, 192, 384, 512 pixels
Format : PNG
Couleur suggÃ©rÃ©e : #10b981 (emerald-600)


ğŸ’¾ STORE ZUSTAND - GESTION D'Ã‰TAT
================================================================================

TYPES PRINCIPAUX :

1. MonthlyPlan
   - id : Identifiant unique
   - month : Mois au format YYYY-MM
   - fixedIncomes : Array<FixedItem>
   - fixedExpenses : Array<FixedItem>
   - envelopes : Array<Envelope>
   - calculatedResults : CalculatedResults
   - createdAt, updatedAt

2. FixedItem (Revenus/DÃ©penses fixes)
   - id, name, amount

3. Envelope (Enveloppe d'allocation)
   - id, name, percentage, amount

4. CalculatedResults (RÃ©sultats calculÃ©s)
   - totalIncome : Total des revenus
   - totalExpenses : Total des dÃ©penses fixes
   - availableAmount : Reste disponible
   - totalEnvelopes : Total allouÃ© en enveloppes
   - finalBalance : Solde final
   - lastCalculated : Timestamp

5. UserSettings (ParamÃ¨tres utilisateur)
   - firstDayOfMonth : 1-28 (dÃ©but cycle budgÃ©taire)
   - currency : EUR, USD, etc.
   - locale : fr-FR, en-US, etc.
   - autoAdjustPercentages : true/false
   - theme : 'light' | 'dark' | 'system'


ACTIONS DU STORE :

Plans mensuels :
- addMonthlyPlan(month) â†’ CrÃ©e un nouveau plan
- updateMonthlyPlan(id, plan) â†’ Met Ã  jour un plan
- deleteMonthlyPlan(id) â†’ Supprime un plan
- getMonthlyPlan(id) â†’ RÃ©cupÃ¨re un plan
- copyMonthlyPlan(sourceId, newMonth) â†’ Copie un plan
- setCurrentMonth(id) â†’ DÃ©finit le plan actif
- importMonthlyPlanFromData(planData) â†’ Importe depuis JSON

Calculs automatiques :
- recalculatePlan(id) â†’ Recalcule tous les rÃ©sultats
- normalizeEnvelopesForPlan(id) â†’ Ajuste les % Ã  100%

ParamÃ¨tres :
- updateUserSettings(settings) â†’ Modifie paramÃ¨tres (theme inclus)


ğŸ“Š LOGIQUE DE CALCUL BUDGÃ‰TAIRE
================================================================================

Le systÃ¨me suit cette logique stricte :

1. Total Revenus = Î£(revenus fixes)
2. Total DÃ©penses = Î£(dÃ©penses fixes)
3. Reste Disponible = Total Revenus - Total DÃ©penses
4. Pour chaque enveloppe :
   Montant = (Reste Disponible Ã— Pourcentage) / 100
5. Total Enveloppes = Î£(montants enveloppes)
6. Solde Final = Reste Disponible - Total Enveloppes

Validation :
- Î£(pourcentages enveloppes) = 100%
- Si autoAdjustPercentages = true : ajustement automatique proportionnel
- Si autoAdjustPercentages = false : erreur si â‰  100%
- Montants nÃ©gatifs bloquÃ©s Ã  la saisie
- Noms vides bloquÃ©s Ã  la saisie


ğŸ”§ UTILITAIRES ET HELPERS
================================================================================

lib/storage.ts
- StorageService : Wrapper pour localforage
- MÃ©thodes : get(), set(), remove(), clear(), keys()
- Gestion d'erreurs intÃ©grÃ©e

lib/financial.ts
- formatCurrency(amount) : Formatage en euros
- formatDate(date, format) : Formatage de dates
- calculateTotal(amounts) : Somme d'un tableau
- calculatePercentage(amount, total) : Calcul de %
- calculateBalance(income, expenses) : Calcul du solde
- getDateRange(period) : Plages de dates
- getMonthName(date) : Nom du mois

lib/monthly-plan.ts
- calculateFixedTotal(items) : Total des Ã©lÃ©ments fixes
- calculateAvailableAmount(incomes, expenses) : Reste disponible
- normalizeEnvelopePercentages(envelopes) : Ajuste Ã  100%
- recalculateEnvelopeAmounts(envelopes, available) : Recalcule montants
- validateEnvelopesPercentage(envelopes) : VÃ©rifie = 100%
- getTotalPercentage(envelopes) : Total des %
- getPlanSummary(plan) : RÃ©sumÃ© complet
- validateMonthlyPlan(plan) : Validation complÃ¨te

lib/plan-calculator.ts
- calculatePlanResults(plan) : Calcule tous les rÃ©sultats
- createCalculatedPlan(month, id) : CrÃ©e un plan vide

lib/validation.ts
- validateName(name) : VÃ©rifie nom non vide
- validateAmount(amount) : VÃ©rifie montant positif
- validatePercentage(percentage) : VÃ©rifie 0-100%
- validateMonth(month) : VÃ©rifie format YYYY-MM
- validateEmail(email) : VÃ©rifie format email
- validateTotalPercentage(percentages) : VÃ©rifie somme = 100%
- validateNotEmpty(array, itemName) : VÃ©rifie non vide
- validateMultiple(validations) : Combine validations
- sanitizeString(input) : Nettoie chaÃ®ne (anti-XSS)
- formatNumber(value) : Formate nombre pour affichage

lib/notifications.ts
- getCurrentMonthStatus(plans) : DÃ©tecte alertes budget
- getGeneralStats(plans) : Statistiques globales

lib/export-import.ts
- exportMonthlyPlanToJSON(plan) : Exporte un plan
- exportAllPlansToJSON(plans) : Exporte tous les plans
- importMonthlyPlanFromJSON(file) : Importe avec validation
- importAllPlansFromJSON(file) : Importe plusieurs plans


ğŸ¨ COMPOSANTS REACT
================================================================================

NAVIGATION ET THÃˆME :
Navigation.tsx
- Sidebar avec liens vers toutes les pages
- Indicateur de page active
- ThemeToggle intÃ©grÃ©
- Retour Ã  l'accueil
- Support dark mode

ThemeProvider.tsx
- Context Provider React pour le thÃ¨me
- DÃ©tection prÃ©fÃ©rence systÃ¨me
- Ã‰coute changements temps rÃ©el
- Application classe 'dark' sur <html>

ThemeToggle.tsx
- Bouton switch 3 modes : Light/Dark/System
- IcÃ´nes adaptÃ©es par mode
- Label explicite
- Transitions fluides

GRAPHIQUES :
SankeyChart.tsx
- Diagramme de flux Sankey avec d3-sankey
- Structure 3 niveaux : Revenus â†’ DÃ©penses/Disponible â†’ Enveloppes
- Tooltips interactifs
- LÃ©gende avec code couleur
- Responsive (viewBox)

WaterfallChart.tsx
- Graphique en cascade avec recharts
- Cascade : Revenus â†’ DÃ©penses â†’ Enveloppes â†’ Solde
- RÃ©sumÃ© financier intÃ©grÃ©
- Barres flottantes
- Couleurs adaptatives

FORMULAIRES AVEC VALIDATION :
FixedItemInput.tsx
- Input ligne unique pour revenu/dÃ©pense
- Validation nom + montant en temps rÃ©el
- Feedback visuel (ring rouge si erreur)
- Messages d'erreur sous le champ
- Bouton supprimer avec icÃ´ne
- Support dark mode

IncomeExpenseForm.tsx
- Formulaire complet revenus ou dÃ©penses
- Liste dynamique d'items
- Ajout/suppression
- Calcul total en temps rÃ©el
- Statistiques (nombre, total)
- Enter pour ajouter

PercentageSlider.tsx
- Slider + input synchronisÃ©s
- Validation 0-100%
- Barre de progression visuelle
- Affichage montant calculÃ©
- Messages d'erreur si dÃ©passement
- Couleur personnalisÃ©e par enveloppe

EnvelopeAllocator.tsx
- Gestion complÃ¨te des enveloppes
- Liste d'enveloppes avec sliders
- Ajout d'enveloppe personnalisÃ©e
- Validation totale = 100%
- Barre de validation avec code couleur
- Bouton "Ajuster Ã  100%"
- RÃ©sumÃ© (nombre, montant total)

BudgetValidation.tsx
- Composant validation visuelle
- Ã‰tat validÃ© (vert) ou erreurs (rouge)
- Liste des erreurs dÃ©taillÃ©e
- Bouton correction automatique
- Support dark mode

MESSAGES ET NOTIFICATIONS :
ValidationError.tsx
- Message erreur inline (petit, sous champ)
- Texte rouge adaptatif light/dark

ErrorMessage.tsx
- BanniÃ¨re erreur complÃ¨te
- IcÃ´ne erreur
- Bouton dismiss optionnel
- Support dark mode

SuccessMessage.tsx
- BanniÃ¨re succÃ¨s complÃ¨te
- IcÃ´ne succÃ¨s
- Bouton dismiss optionnel
- Support dark mode

NotificationBanner.tsx
- Notification contextuelle
- 4 types : error, warning, success, info
- IcÃ´nes adaptÃ©es par type
- Couleurs adaptÃ©es par type
- Bouton action avec lien
- Bouton dismiss
- Support dark mode


ğŸ’¿ PERSISTANCE DES DONNÃ‰ES
================================================================================

SystÃ¨me de stockage :
- Utilise localforage (IndexedDB)
- Wrapper Zustand persist middleware
- Nom du store : "moneto-storage"
- Version : 2

FonctionnalitÃ©s :
- Sauvegarde automatique Ã  chaque modification
- Restauration au chargement de l'app
- Callback onRehydrateStorage pour recalcul automatique
- Migration automatique des anciens formats

DonnÃ©es persistÃ©es :
- Tous les plans mensuels (monthlyPlans)
- Plan actif (currentMonthId)
- ParamÃ¨tres utilisateur (userSettings + theme)
- CatÃ©gories (categories)
- Transactions (transactions)

PWA Mode Offline :
- DonnÃ©es en IndexedDB (fonctionnent offline)
- Assets en cache (Service Worker)
- Pages principales en cache
- Graphiques fonctionnent offline
- Synchronisation auto quand reconnectÃ©


ğŸš€ SCRIPTS NPM DISPONIBLES
================================================================================

npm run dev        â†’ Lance le serveur de dÃ©veloppement (http://localhost:3000)
npm run build      â†’ Compile l'application pour la production (+ gÃ©nÃ¨re PWA)
npm run start      â†’ Lance le serveur de production
npm run lint       â†’ VÃ©rifie le code avec ESLint


ğŸ“¦ DÃ‰PENDANCES COMPLÃˆTES
================================================================================

PRODUCTION :
- @types/node ^24.6.0
- @types/react ^19.1.16
- @types/react-dom ^19.1.9
- d3-sankey ^0.12.3
- d3-scale ^4.0.2
- d3-selection ^3.0.0
- d3-shape ^3.2.0
- dayjs ^1.11.18
- localforage ^1.10.0
- next ^15.5.4
- next-pwa ^5.6.0          â† PWA
- react ^19.1.1
- react-dom ^19.1.1
- recharts ^3.2.1
- typescript ^5.9.2
- zustand ^5.0.8

DÃ‰VELOPPEMENT :
- @eslint/eslintrc ^3.3.1
- @types/d3-sankey ^0.12.4
- autoprefixer ^10.4.21
- eslint ^9.36.0
- eslint-config-next ^15.5.4
- postcss ^8.5.6
- tailwindcss ^4.1.13


ğŸ¨ CONFIGURATION TAILWIND
================================================================================

Configuration :
- darkMode: 'class'          â† Activation dark mode
- Content: app/**, components/**, pages/**
- Plugins: Aucun (config de base)

Classes personnalisÃ©es :
- Couleurs : emerald (principal), blue, red, purple, slate
- Variables CSS : --background, --foreground
- Responsive : mobile-first avec breakpoints md, lg

Dark Mode :
- Activation via classe 'dark' sur <html>
- Toutes les couleurs adaptÃ©es avec dark:
- Scrollbar personnalisÃ©e :
  - Light : #cbd5e1 â†’ #94a3b8 (hover)
  - Dark : #475569 â†’ #64748b (hover)

Breakpoints :
- md: 768px (tablettes)
- lg: 1024px (desktop)


âš™ï¸ CONFIGURATION TYPESCRIPT
================================================================================

ParamÃ¨tres :
- Cible : ES2020
- Mode strict : ActivÃ©
- Alias de chemins : @/* â†’ ./*
- Module : ESNext
- JSX : preserve (pour Next.js)
- Plugin Next.js intÃ©grÃ©


ğŸ” SÃ‰CURITÃ‰ ET BONNES PRATIQUES
================================================================================

âœ“ Validation stricte des donnÃ©es (lib/validation.ts)
âœ“ Sanitization des entrÃ©es utilisateur (anti-XSS)
âœ“ Gestion d'erreurs dans tous les helpers
âœ“ TypeScript strict mode
âœ“ ESLint avec rÃ¨gles Next.js
âœ“ Pas de donnÃ©es sensibles stockÃ©es
âœ“ Stockage local uniquement (pas de backend)
âœ“ Montants limitÃ©s pour Ã©viter overflow (999,999,999 max)
âœ“ localStorage sÃ©curisÃ© avec localforage
âœ“ Service Worker en cache sÃ©curisÃ©


ğŸš€ PERFORMANCE
================================================================================

âœ“ Lazy loading des composants
âœ“ Optimisation des images Next.js
âœ“ Service Worker avec stratÃ©gies de cache intelligentes
âœ“ CSS optimisÃ© avec Tailwind purge
âœ“ Recharts avec transpilation optimisÃ©e
âœ“ IndexedDB pour donnÃ©es (plus rapide que localStorage)
âœ“ Calculs optimisÃ©s en temps rÃ©el
âœ“ Dark mode sans flash (suppressHydrationWarning)


ğŸ“± COMPATIBILITÃ‰
================================================================================

Navigateurs supportÃ©s :
- Chrome/Edge (desktop & mobile) - RecommandÃ©
- Firefox (desktop & mobile)
- Safari (iOS & macOS)
- Samsung Internet

Features PWA :
- Installation : âœ“ Chrome, Edge, Safari iOS 16.4+
- Service Worker : âœ“ Tous navigateurs modernes
- Offline : âœ“ GrÃ¢ce Ã  IndexedDB

Design Responsive :
- Mobile-first approach
- Breakpoints : md (768px+), lg (1024px+)
- Grilles adaptatives
- Navigation adaptative
- Formulaires optimisÃ©s mobile


ğŸ“ NOTES IMPORTANTES
================================================================================

1. L'application fonctionne entiÃ¨rement cÃ´tÃ© client (pas de backend)
2. Toutes les donnÃ©es sont stockÃ©es localement dans IndexedDB
3. Les calculs sont effectuÃ©s automatiquement et en temps rÃ©el
4. La validation des pourcentages peut Ãªtre automatique ou stricte
5. Le store Zustand gÃ¨re la persistance et le recalcul automatique
6. Les graphiques sont gÃ©nÃ©rÃ©s dynamiquement Ã  partir des donnÃ©es
7. L'interface est responsive et optimisÃ©e pour desktop/mobile
8. Le dark mode suit les prÃ©fÃ©rences OS par dÃ©faut
9. L'app fonctionne offline une fois installÃ©e (PWA)
10. Les donnÃ©es peuvent Ãªtre exportÃ©es/importÃ©es en JSON

ICÃ”NES PWA :
Les icÃ´nes doivent Ãªtre crÃ©Ã©es manuellement dans public/icons/
Voir public/icons/README.md pour les instructions complÃ¨tes
Tailles requises : 72, 96, 128, 144, 152, 192, 384, 512 pixels
Format : PNG recommandÃ©
Couleur principale suggÃ©rÃ©e : #10b981 (emerald-600)

SERVICE WORKER :
- DÃ©sactivÃ© en dev (disable: process.env.NODE_ENV === 'development')
- GÃ©nÃ©rÃ© automatiquement lors du build
- Fichiers gÃ©nÃ©rÃ©s dans public/ (exclus de git via .gitignore)

THÃˆME :
- Par dÃ©faut : "system" (suit prÃ©fÃ©rences OS)
- Choix persistÃ© dans Zustand â†’ localforage
- Changement instantanÃ© sans rechargement

NOTIFICATIONS :
- VÃ©rifiÃ©es au chargement de la page d'accueil
- BasÃ©es sur l'Ã©tat du plan du mois en cours
- Peuvent Ãªtre dismissed (session uniquement, rÃ©apparaissent au reload)


ğŸ“š DOCUMENTATION DISPONIBLE
================================================================================

README.md          â†’ Documentation gÃ©nÃ©rale du projet
STORE_GUIDE.md     â†’ Guide complet du store Zustand
PROJET_RESUME.txt  â†’ Ce fichier (documentation complÃ¨te et Ã  jour)


ğŸ¯ PROCHAINES Ã‰TAPES POSSIBLES
================================================================================

AmÃ©liorations potentielles :
- Graphiques supplÃ©mentaires (Ã©volution dans le temps, comparaisons)
- Graphiques interactifs avancÃ©s (drill-down)
- Comparaison entre plusieurs mois (dashboard comparatif)
- CatÃ©gories personnalisables pour les revenus/dÃ©penses
- Multi-devises avec taux de change
- Rappels et notifications push (PWA)
- Mode tablette optimisÃ© avec layout adaptatif
- Backup automatique dans le cloud (optionnel)
- Import depuis CSV/Excel
- Export vers Excel avec formules
- Statistiques avancÃ©es et prÃ©visions
- Objectifs d'Ã©pargne avec suivi
- Alertes sur dÃ©passement de budget


ğŸ‰ FONCTIONNALITÃ‰S RÃ‰CEMMENT AJOUTÃ‰ES (v2.0.0)
================================================================================

âœ… SystÃ¨me de validation complet des entrÃ©es utilisateur
âœ… ThÃ¨me Dark Mode avec 3 modes (Light/Dark/System)
âœ… Notifications intelligentes sur page d'accueil
âœ… Progressive Web App (PWA) avec mode offline
âœ… Export/Import JSON des plans
âœ… Composants rÃ©utilisables avec validation intÃ©grÃ©e
âœ… Design responsive amÃ©liorÃ©
âœ… Feedback visuel sur toutes les interactions
âœ… Performance optimisÃ©e avec Service Worker
âœ… SÃ©curitÃ© renforcÃ©e avec sanitization


================================================================================
                           FIN DU RÃ‰SUMÃ‰ DU PROJET
                     Document mis Ã  jour pour la version 2.0.0
                     DerniÃ¨re mise Ã  jour : Octobre 2025
================================================================================
